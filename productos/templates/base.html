<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Smart Inventory{% endblock %}</title>
  <style>
    :root {
      --primary:#0b2e68;
      --text:#101418;
      --muted:#667085;
      --bg:#f7f8fb;
      --card:#ffffff;
      --border:#e8ecf2;
      --radius:16px;
    }

    * {
      box-sizing:border-box;
    }

    body {
      margin:0;
      font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:var(--bg);
    }

    header {
      background:var(--primary);
      color:#ffffff;
      padding:14px 20px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }

    .brand {
      font-weight:800;
      font-size:18px;
      letter-spacing:0.4px;
    }

    nav {
      display:flex;
      align-items:center;
      gap:16px;
      flex-wrap:wrap;
    }

    .nav-user {
      font-weight:600;
      opacity:0.9;
      font-size:14px;
    }

    nav a,
    nav button {
      color:#ffffff;
      text-decoration:none;
      background:none;
      border:none;
      cursor:pointer;
      font-weight:600;
      font-size:14px;
      padding:6px 10px;
      border-radius:999px;
      transition:background 0.18s ease, opacity 0.18s ease;
    }

    nav a:hover,
    nav button:hover {
      background:rgba(255,255,255,0.16);
      opacity:1;
    }

    .wrapper {
      max-width:1200px;
      margin:28px auto;
      padding:0 18px 48px;
      min-height:calc(100vh - 140px);
    }

    footer {
      border-top:1px solid var(--border);
      color:var(--muted);
      font-size:13px;
      padding:14px 20px;
      text-align:center;
    }

    .flash-group {
      display:grid;
      gap:12px;
      margin-bottom:24px;
    }

    .flash {
      padding:12px 16px;
      border-radius:12px;
      font-size:14px;
      font-weight:600;
    }

    .flash--success {
      background:rgba(12,120,45,0.12);
      border:1px solid rgba(12,120,45,0.28);
      color:#195c27;
    }

    .flash--error {
      background:rgba(192,0,0,0.1);
      border:1px solid rgba(192,0,0,0.35);
      color:#8b1a1a;
    }

    .tiles {
      display:grid;
      gap:22px;
      grid-template-columns:1fr;
    }

    @media (min-width:760px) {
      .tiles { grid-template-columns:1fr 1fr; }
    }

    .tile {
      position:relative;
      display:block;
      text-decoration:none;
      color:inherit;
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      aspect-ratio:4/3;
      overflow:hidden;
      transition:0.18s ease transform, 0.18s ease box-shadow, 0.18s ease border-color;
      box-shadow:0 1px 0 rgba(16,20,24,0.03);
      padding:24px;
    }

    .tile:hover {
      transform:translateY(-4px);
      box-shadow:0 14px 30px rgba(16,20,24,0.08);
      border-color:#dfe6ee;
    }

    .tile__badge {
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-size:12px;
      font-weight:700;
      padding:6px 12px;
      border-radius:999px;
      background:rgba(11,108,255,0.12);
      color:#0b5bd9;
      margin-bottom:12px;
    }

    .tile__title {
      font-weight:800;
      font-size:18px;
      margin:0 0 10px 0;
    }

    .tile__desc {
      color:#667085;
      font-size:13.5px;
      margin:0;
      line-height:1.5;
    }
  </style>
</head>
<body>
  {% if not request.resolver_match or request.resolver_match.url_name != 'login' %}
    <header>
      <div class="brand">Smart Inventory</div>
      <nav>
        {% if user.is_authenticated %}
          <span class="nav-user">Usuario: {{ user.get_short_name|default:user.username }}</span>
          <a href="{% url 'home' %}">Inicio</a>
          <a href="{% url 'productos' %}">Productos</a>
          {% if user.is_staff or user.is_superuser %}
            <a href="{% url 'dashboard' %}">Dashboard</a>
            <a href="{% url 'prediccion_productos' %}">Prediccion</a>
            <a href="{% url 'informes' %}">Informes</a>
            <a href="{% url 'usuarios' %}">Usuarios</a>
          {% endif %}
          <form action="{% url 'logout' %}" method="post" style="display:inline;margin:0">
            {% csrf_token %}
            <button type="submit">Cerrar sesion</button>
          </form>
        {% else %}
          <a href="{% url 'login' %}">Iniciar sesion</a>
        {% endif %}
      </nav>
    </header>
  {% endif %}

  <main class="wrapper">
    {% if messages %}
      <div class="flash-group">
        {% for message in messages %}
          <div class="flash{% if message.tags %} flash--{{ message.tags }}{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    {% block content %}{% endblock %}
  </main>

  <footer>&copy; {% now "Y" %} Smart Inventory - Plataforma de control de inventario.</footer>
</body>
</html>
