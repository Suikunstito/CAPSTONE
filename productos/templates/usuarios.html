{% extends "base.html" %}
{% block title %}Usuarios{% endblock %}

{% block content %}
<section style="display:flex;flex-direction:column;gap:14px;margin-bottom:28px;">
  <div>
    <h2 style="margin:0;font-size:28px;font-weight:800;color:#0b2e68;">Usuarios del equipo</h2>
    <p style="margin:4px 0 0;color:#5b6578;font-size:14px;">
      Listado de cuentas activas sin privilegios administrativos. Usa esta vista para asignar credenciales a trabajadores.
    </p>
  </div>
  <div style="background:#ffffff;border:1px solid #e3e8f3;border-radius:18px;padding:16px 20px;color:#4c566a;font-size:13px;">
    <strong>Tip:</strong> Para promover un usuario a administrador, edita su perfil y marca la casilla <code>Staff status</code> o <code>Superuser status</code> en el panel de Django.
  </div>
</section>

<div style="overflow-x:auto;background:#ffffff;border-radius:22px;border:1px solid #e3e8f3;">
  <table>
    <thead>
      <tr>
        <th>Usuario</th>
        <th>Nombre</th>
        <th>Email</th>
        <th>Fecha alta</th>
        <th>Ultimo acceso</th>
        <th>Activo</th>
      </tr>
    </thead>
    <tbody>
      {% for persona in trabajadores %}
        <tr>
          <td>{{ persona.username }}</td>
          <td>{{ persona.get_full_name|default:"-" }}</td>
          <td>{{ persona.email|default:"-" }}</td>
          <td>{{ persona.date_joined|date:"d/m/Y H:i" }}</td>
          <td>
            {% if persona.last_login %}
              {{ persona.last_login|date:"d/m/Y H:i" }}
            {% else %}
              Nunca
            {% endif %}
          </td>
          <td>{{ persona.is_active|yesno:"Si,No" }}</td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="6" style="text-align:center;color:#5b6578;padding:36px 0;">
            No hay usuarios registrados con rol de trabajador.
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
